import{r as t,j as r,p as h}from"./index-DLwlINrL.js";const O=({src:a,alt:c,width:n,height:s,className:o="",loading:u="lazy",priority:i=!1,placeholder:m=null,onLoad:f=()=>{},onError:p=()=>{},...x})=>{const[l,b]=t.useState(!1),[N,g]=t.useState(!1),j=t.useRef(null),d=t.useRef(null);t.useEffect(()=>{if(i&&a){const e=document.createElement("link");return e.rel="preload",e.href=a,e.as="image",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}}},[i,a]);const v=e=>{if(b(!0),d.current){const I=performance.now()-d.current;h.trackImageOptimization(a,I,!i)}f(e)},y=e=>{g(!0),p(e)},E=()=>{d.current=performance.now()},z=n&&s?`(max-width: 768px) ${Math.round(n*.8)}px, ${n}px`:"100vw";return N?r.jsxDEV("div",{className:`bg-gray-200 flex items-center justify-center ${o}`,style:{width:n,height:s},"aria-label":"Image non disponible",children:r.jsxDEV("span",{className:"text-gray-500 text-sm",children:"Image non disponible"},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/OptimizedImage.jsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/OptimizedImage.jsx",lineNumber:68,columnNumber:7},void 0):r.jsxDEV("div",{className:`relative ${o}`,style:{width:n,height:s},children:[!l&&m&&r.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:m},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/OptimizedImage.jsx",lineNumber:82,columnNumber:9},void 0),r.jsxDEV("img",{ref:j,src:a,alt:c,width:n,height:s,loading:i?"eager":u,sizes:z,onLoad:v,onLoadStart:E,onError:y,className:`
          ${l?"opacity-100":"opacity-0"} 
          transition-opacity duration-300 
          ${o}
        `,style:{objectFit:"cover",objectPosition:"center"},...x},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/OptimizedImage.jsx",lineNumber:88,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/OptimizedImage.jsx",lineNumber:79,columnNumber:5},void 0)};export{O};
