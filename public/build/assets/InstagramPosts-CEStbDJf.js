import{r as a,j as s,n as N,o as g}from"./index-DLwlINrL.js";import{O as d}from"./OptimizedImage-C-GOd6sh.js";import{u as h}from"./useOptimizedAnimations-BO0fLRNw.js";const j=()=>{const[c,u]=a.useState([]),[f,i]=a.useState(!0),[l,m]=a.useState(null),o=a.useRef(null);h(o,{y:30,opacity:0,duration:.8,ease:"power2.out"}),a.useEffect(()=>{(async()=>{try{i(!0);const t=(await N.get(`${g}/api/instagram`)).data.data.filter(n=>n.media_type==="IMAGE"||n.media_type==="CAROUSEL_ALBUM"||n.media_type==="VIDEO");u(t),m(null)}catch(r){console.error("Failed to fetch Instagram posts:",r),m("Ã‰chec du chargement des publications Instagram")}finally{i(!1)}})()},[]);const p=e=>{const r=e.media_type==="VIDEO"?e.thumbnail_url:e.media_url,t=e.media_type==="VIDEO"?"/assets/icons/reel.svg":"/assets/icons/instagram.svg",n=e.media_type==="VIDEO"?"Reel":"Instagram";return s.jsxDEV("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer","aria-label":`Voir ce post Instagram: ${e.caption?e.caption.substring(0,100)+"...":"Post Instagram"}`,children:s.jsxDEV("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:s.jsxDEV("div",{className:"group",children:[s.jsxDEV(d,{className:"absolute top-0 left-0 w-full h-full object-cover",src:r,alt:e.caption||`Post Instagram ${e.media_type.toLowerCase()}`,width:300,height:300,priority:!1},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:68,columnNumber:13},void 0),s.jsxDEV("div",{className:"absolute top-0 left-0 w-full h-full bg-black opacity-0 group-hover:opacity-60 transition-opacity duration-300 flex items-center justify-center",children:s.jsxDEV(d,{src:t,alt:n,className:"w-8 h-8",width:32,height:32,priority:!1},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:80,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:79,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:67,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:66,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:56,columnNumber:7},void 0)};return s.jsxDEV("section",{ref:o,className:"relative b-lg:max-lg:py-[70px]",children:f?s.jsxDEV("div",{className:"flex justify-center items-center py-8","aria-label":"Chargement des posts Instagram",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primaryOrange"},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:102,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:98,columnNumber:9},void 0):l?s.jsxDEV("div",{className:"text-center py-8 text-red-500",role:"alert",children:l},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:105,columnNumber:9},void 0):s.jsxDEV("div",{className:"flex flex-wrap",children:c.map(e=>s.jsxDEV("div",{className:"w-1/2 sm:w-1/4",children:s.jsxDEV("div",{children:p(e)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:112,columnNumber:15},void 0)},e.id,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:111,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:109,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chadiayari/development/milkd-frontend/src/components/InstagramPosts.jsx",lineNumber:96,columnNumber:5},void 0)};export{j as default};
